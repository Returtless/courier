# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ handlers.py

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: –≠—Ç–∞–ø 2/5 –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
1. –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `src/bot/handlers/`
2. –°–æ–∑–¥–∞–Ω—ã –≤—Å–µ –º–æ–¥—É–ª–∏ —Å –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
3. –û–±–Ω–æ–≤–ª–µ–Ω `main.py`

### üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ: –ü–µ—Ä–µ–Ω–æ—Å –∫–æ–¥–∞

---

## –ö–∞—Ä—Ç–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ –∫–æ–¥–∞

### 1. base_handlers.py (pending)
**–ß—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å:**
- `handle_start()` - –∫–æ–º–∞–Ω–¥–∞ /start
- `handle_help()` - –∫–æ–º–∞–Ω–¥–∞ /help  
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (üì¶ –ó–∞–∫–∞–∑—ã, üó∫Ô∏è –ú–∞—Ä—à—Ä—É—Ç)
- Callback —Ä–æ—É—Ç–∏–Ω–≥

**–ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ handlers.py:** 1-200, 1619-1713

---

### 2. order_handlers.py (pending) 
**–ß—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å:**
- `handle_add_orders()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- `handle_order_details_start()` - —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `show_order_details()` - –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
- `mark_order_delivered()` - –æ—Ç–º–µ—Ç–∫–∞ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω
- `handle_search_by_number()` - –ø–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É
- `handle_view_delivered()` - –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö
- –í—Å–µ `process_order_*()` –º–µ—Ç–æ–¥—ã (phone, name, comment, entrance, apartment, etc.)
- –í—Å–µ `_update_order_field()` –º–µ—Ç–æ–¥—ã

**–ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** 400-1500, 1714-2800, 2544-3200

---

### 3. route_handlers.py (pending)
**–ß—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å:**
- `handle_set_start_location()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—á–∫–∏ —Å—Ç–∞—Ä—Ç–∞
- `handle_optimize_route()` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
- `handle_show_route()` - –ø–æ–∫–∞–∑ –º–∞—Ä—à—Ä—É—Ç–∞
- `handle_show_calls()` - –≥—Ä–∞—Ñ–∏–∫ –∑–≤–æ–Ω–∫–æ–≤
- `process_start_location()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–¥—Ä–µ—Å–∞ —Å—Ç–∞—Ä—Ç–∞
- `process_start_time()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ä—Ç–∞
- –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å RouteOptimizer

**–ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** 800-1600, 2200-2900

---

### 4. call_handlers.py (pending)
**–ß—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å:**
- `handle_call_confirm()` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- `handle_call_reject()` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
- `process_call_comment()` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–≤–æ–Ω–∫—É
- Callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è `call_confirm_*`, `call_reject_*`

**–ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** 3200-3500

---

### 5. settings_handlers.py (pending)
**–ß—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å:**
- `handle_settings_menu()` - –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `handle_setting_update()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `handle_setting_value()` - –≤–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `handle_settings_reset()` - —Å–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `handle_chefmarket_credentials_menu()` - –º–µ–Ω—é —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `handle_chefmarket_add_credentials()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `handle_chefmarket_delete_credentials()` - —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `process_chefmarket_login()` - –≤–≤–æ–¥ –ª–æ–≥–∏–Ω–∞
- `process_chefmarket_password()` - –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è

**–ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** 3746-4174

---

### 6. import_handlers.py (pending)
**–ß—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –∏–∑ import_commands.py:**
- `handle_set_credentials()` - /set_credentials
- `handle_delete_credentials()` - /delete_credentials  
- `handle_import_orders()` - /import_orders
- `_import_orders_async()` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç

**–§–∞–π–ª:** `src/bot/import_commands.py` (–≤–µ—Å—å —Ñ–∞–π–ª ~205 —Å—Ç—Ä–æ–∫)

---

### 7. traffic_handlers.py (pending)
**–ß—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å:**
- `handle_monitor()` - –∑–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `handle_stop_monitor()` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `handle_traffic_status()` - —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–±–æ–∫
- `handle_traffic_recheck()` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- `setup_traffic_callbacks()` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ callback

**–ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:** 3500-3746

---

## –ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–Ω–æ—Å–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π):

1. **base_handlers.py** - –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (—Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ)
2. **traffic_handlers.py** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–±–æ–∫ (–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–¥—É–ª—å)
3. **call_handlers.py** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–≤–æ–Ω–∫–æ–≤ (–Ω–µ–±–æ–ª—å—à–æ–π –º–æ–¥—É–ª—å)
4. **import_handlers.py** - –∏–º–ø–æ—Ä—Ç –∏–∑ import_commands.py
5. **settings_handlers.py** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏)
6. **route_handlers.py** - –º–∞—Ä—à—Ä—É—Ç—ã (—Å–ª–æ–∂–Ω—ã–π –º–æ–¥—É–ª—å)
7. **order_handlers.py** - –∑–∞–∫–∞–∑—ã (—Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –º–æ–¥—É–ª—å)

---

## –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞:

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä: `read_lints`
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å TODO
3. ‚ö†Ô∏è –ù–µ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Å—Ä–∞–∑—É (–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å)
4. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## –§–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø:

1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤–µ—Å—å –∫–æ–¥ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω
2. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π `src/bot/handlers.py`
3. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π `src/bot/import_commands.py`
4. –û–±–Ω–æ–≤–∏—Ç—å README.md —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –°—Ç–∞—Ä—ã–π `handlers.py` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ `handlers.py.old` –Ω–∞ –≤—Ä–µ–º—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ (`from .base_handlers import ...`)
- –ú–µ—Ç–æ–¥—ã –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –∫–ª–∞—Å—Å—É —á–µ—Ä–µ–∑ `self.parent`

